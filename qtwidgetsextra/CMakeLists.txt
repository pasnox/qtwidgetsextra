# QtWidgetsExtra Library

gateau_add_library(QtWidgetsExtraLib
    AUTOMOC
    AUTOUIC
    AUTORCC
    PROPERTIES
        LIBRARY_OUTPUT_NAME
            QtWidgetsExtra${QT_VERSION_MAJOR}
     INCLUDE_DIRECTORIES
        PUBLIC
            $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}>
    LINK_LIBRARIES
        PUBLIC
            Qt${QT_VERSION_MAJOR}::Widgets
    HEADERS
        QtWidgetsExtra/QtWidgetsExtraCache.h
        QtWidgetsExtra/QAbstractButtonLineEdit.h
        QtWidgetsExtra/QEmbedableButton_p.h
        QtWidgetsExtra/Additional/QShape.h
        QtWidgetsExtra/Additional/QUpDownButton.h
        QtWidgetsExtra/Additional/QCollapsibleFrame.h
        QtWidgetsExtra/ButtonGroupBox/QAbstractButtonListModel.h
        QtWidgetsExtra/ButtonGroupBox/QButtonGroupBox.h
        QtWidgetsExtra/Color/QColorAction.h
        QtWidgetsExtra/Color/QColorListModel.h
        QtWidgetsExtra/Color/QColorLineEdit.h
        QtWidgetsExtra/Color/QColorPushButton.h
        QtWidgetsExtra/Color/QColorToolButton.h
        QtWidgetsExtra/Color/QColorComboBox.h
        QtWidgetsExtra/Color/QColorListView.h
        QtWidgetsExtra/FileDialog/QFileAction.h
        QtWidgetsExtra/FileDialog/QOpenFileLineEdit.h
        QtWidgetsExtra/FileDialog/QOpenFileButton.h
        QtWidgetsExtra/FileDialog/QOpenFolderLineEdit.h
        QtWidgetsExtra/FileDialog/QOpenFolderButton.h
        QtWidgetsExtra/FileDialog/QSaveFileLineEdit.h
        QtWidgetsExtra/FileDialog/QSaveFileButton.h
        QtWidgetsExtra/FileSystem/QFileSystemTreeView.h
        QtWidgetsExtra/FileSystem/QFileSystemListView.h
    SOURCES
        QtWidgetsExtra/QtWidgetsExtraCache.cpp
        QtWidgetsExtra/QAbstractButtonLineEdit.cpp
        QtWidgetsExtra/QEmbedableButton.cpp
        QtWidgetsExtra/Additional/QShape.cpp
        QtWidgetsExtra/Additional/QUpDownButton.cpp
        QtWidgetsExtra/Additional/QCollapsibleFrame.cpp
        QtWidgetsExtra/ButtonGroupBox/QAbstractButtonListModel.cpp
        QtWidgetsExtra/ButtonGroupBox/QButtonGroupBox.cpp
        QtWidgetsExtra/Color/QColorAction.cpp
        QtWidgetsExtra/Color/QColorListModel.cpp
        QtWidgetsExtra/Color/QColorLineEdit.cpp
        QtWidgetsExtra/Color/QColorPushButton.cpp
        QtWidgetsExtra/Color/QColorToolButton.cpp
        QtWidgetsExtra/Color/QColorComboBox.cpp
        QtWidgetsExtra/Color/QColorListView.cpp
        QtWidgetsExtra/FileDialog/QFileAction.cpp
        QtWidgetsExtra/FileDialog/QOpenFileLineEdit.cpp
        QtWidgetsExtra/FileDialog/QOpenFileButton.cpp
        QtWidgetsExtra/FileDialog/QOpenFolderLineEdit.cpp
        QtWidgetsExtra/FileDialog/QOpenFolderButton.cpp
        QtWidgetsExtra/FileDialog/QSaveFileLineEdit.cpp
        QtWidgetsExtra/FileDialog/QSaveFileButton.cpp
        QtWidgetsExtra/FileSystem/QFileSystemTreeView.cpp
        QtWidgetsExtra/FileSystem/QFileSystemListView.cpp
)

if (QT_WIDGETS_EXTRA_BUILD_DESIGNER)
    set(PLUGINS_HEADERS
        QtWidgetsExtra/Additional/QCollapsibleFramePlugin.h
        QtWidgetsExtra/Additional/QShapePlugin.h
        QtWidgetsExtra/Additional/QUpDownButtonPlugin.h
        QtWidgetsExtra/ButtonGroupBox/QButtonGroupBoxPlugin.h
        QtWidgetsExtra/Color/QColorComboBoxPlugin.h
        QtWidgetsExtra/Color/QColorLineEditPlugin.h
        QtWidgetsExtra/Color/QColorListViewPlugin.h
        QtWidgetsExtra/Color/QColorPushButtonPlugin.h
        QtWidgetsExtra/Color/QColorToolButtonPlugin.h
        QtWidgetsExtra/FileDialog/QOpenFileButtonPlugin.h
        QtWidgetsExtra/FileDialog/QOpenFileLineEditPlugin.h
        QtWidgetsExtra/FileDialog/QOpenFolderButtonPlugin.h
        QtWidgetsExtra/FileDialog/QOpenFolderLineEditPlugin.h
        QtWidgetsExtra/FileDialog/QSaveFileButtonPlugin.h
        QtWidgetsExtra/FileDialog/QSaveFileLineEditPlugin.h
        QtWidgetsExtra/FileSystem/QFileSystemListViewPlugin.h
        QtWidgetsExtra/FileSystem/QFileSystemTreeViewPlugin.h
    )

    gateau_add_library(QtWidgetsExtraDesignerLib
        AUTOMOC
        AUTOUIC
        AUTORCC
        PROPERTIES
            LIBRARY_OUTPUT_NAME
                QtWidgetsExtraDesigner${QT_VERSION_MAJOR}
            LIBRARY_OUTPUT_DIRECTORY
                ${PROJECT_BINARY_DIR}/bin/designer
         INCLUDE_DIRECTORIES
            PRIVATE
                $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}>
        LINK_LIBRARIES
            PRIVATE
                QtWidgetsExtraLib
            PUBLIC
                Qt${QT_VERSION_MAJOR}::Designer
        HEADERS
            QtWidgetsExtra.h
            ${PLUGINS_HEADERS}
        SOURCES
            QtWidgetsExtra.cpp
            QtWidgetsExtra/Additional/QCollapsibleFramePlugin.cpp
            QtWidgetsExtra/Additional/QShapePlugin.cpp
            QtWidgetsExtra/Additional/QUpDownButtonPlugin.cpp
            QtWidgetsExtra/ButtonGroupBox/QButtonGroupBoxPlugin.cpp
            QtWidgetsExtra/Color/QColorComboBoxPlugin.cpp
            QtWidgetsExtra/Color/QColorLineEditPlugin.cpp
            QtWidgetsExtra/Color/QColorListViewPlugin.cpp
            QtWidgetsExtra/Color/QColorPushButtonPlugin.cpp
            QtWidgetsExtra/Color/QColorToolButtonPlugin.cpp
            QtWidgetsExtra/FileDialog/QOpenFileButtonPlugin.cpp
            QtWidgetsExtra/FileDialog/QOpenFileLineEditPlugin.cpp
            QtWidgetsExtra/FileDialog/QOpenFolderButtonPlugin.cpp
            QtWidgetsExtra/FileDialog/QOpenFolderLineEditPlugin.cpp
            QtWidgetsExtra/FileDialog/QSaveFileButtonPlugin.cpp
            QtWidgetsExtra/FileDialog/QSaveFileLineEditPlugin.cpp
            QtWidgetsExtra/FileSystem/QFileSystemListViewPlugin.cpp
            QtWidgetsExtra/FileSystem/QFileSystemTreeViewPlugin.cpp
    )

    list(TRANSFORM PLUGINS_HEADERS
        REPLACE
            "(.*Plugin.*)"
            "#include \"\\1\""
        OUTPUT_VARIABLE
            PLUGINS_INCLUDES
    )
    list(JOIN PLUGINS_INCLUDES "\n" PLUGINS_INCLUDES)

    file(GENERATE
        OUTPUT
            generated/pluginsHeaders.h
        CONTENT
            "${PLUGINS_INCLUDES}\n"
    )

    list(TRANSFORM PLUGINS_HEADERS
        REPLACE
            ".*/(.*)\\.h*"
            "m_widgets.append(new \\1(this))"
        OUTPUT_VARIABLE
            PLUGINS_NEW
    )
    list(JOIN PLUGINS_NEW ";\n" PLUGINS_NEW)

    file(GENERATE
        OUTPUT
            generated/pluginsNew.h
        CONTENT
            "${PLUGINS_NEW};\n"
    )
endif()
